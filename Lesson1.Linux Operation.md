##  Lesson1. Linux Operation
```
实验日志路径：/usr/tmp/bigData_Homework/zx_log_md5*.txt
```
#### 一、Introduction of Linux
Step1. Unix|AT&T: 闭源<br>
Step2. Minix<br>
Step3. GPU<br>
Step4. Linux<br>
<img src="https://github.com/WIN0624/image/blob/master/linux%E5%86%85%E6%A0%B8.jpg?raw=true" width = 80% height = 120% />
> 《鸟哥的Linux私房菜》《Linux权威指南》

#### 二、Basic Operation
#### 0. pwd命令|cd命令
* pwd命令：查看当前工作目录
* cd命令：用于切换当前工作目录
```
pwd
cd /use/bin：切换至/usr/bin
cd ~：返回home目录
```

#### 1. ls命令
用于显示指定工作目录下的内容（列出目前工作目录所含文件和子目录）
```
0. ls：列出根目录"\"下所有目录
1. ls -a：显示所有文件及目录（将文件开头为'.'的视为隐藏档，不列出）
2. ls -l：除文件名，亦详细列出文件型态、权限、拥有者、文件大小|单列
<一般默认显示是 -c：多列>
3. ls -r：将文件以逆字母序显示
4. ls -t：将文件依建立时间先后次序列出|从新到旧
5. ls -A：同-a，不列出"."(当前目录)和".."(父目录)
6. ls -F：在列出文件名后加符号——可执行的文件为"*" | 目录为"/"
7. ls -R：反-r，将目录下的文件依字母序列出
8. ls -i：显示文件索引节点号inode
9. ls -ltr s*：列出当前目录下s开头的文件|从旧到新
```
#### 2.mkdir命令
用于建立名称为dirName的子目录
```
1. mkdir filename：在当前目录下建立一个名为AAA的子目录
2. mkdir -p f/Test：在f目录下建立名为Test的目录，若没有f目录，则建立一个
3. rm -r filename：删除目录，若在当前目录直接输入目录名，若不在则需加路径名
```
#### 3. vi命令
Linux中最基本的文本编辑器<br>
<br>
3.1  vi的三种状态
```
1. 命令行模式_command mode
    控制：屏幕光标的移动|字符、字或行的删除|移动复制某区段|进入插入或底行模式
2. 插入模式_insert mode
    在此模式下才可做文字输入，按「ESC」返回命令行模式
3. 底行模式_last line mode
    将文件保存或退出vi|设置编辑环境（如寻找字符串、列出行号等）
    一般将底行模式归于命令行模式
```
3.2  vi的基本操作
```
0. 进入vi
   vi sss.txt：输入vi和文件名进入vi|若没有则新建文件后进入
   rm filename：删除文件
1. 切换至插入模式
   按i/a/o/s任一可进入插入模式，进行文字编辑<详见3.3>
   在插入模式下仅可不断输入，若发现错字，需重回命令行模式进行删除
2. 退出vi及文件保存
   按「ESC」进入命令行模式后，按「：」进入底行模式
  （1）:w filename!——将文章以指定文件名filename保存|!指确定
  （2）:wq!——write写入(存盘)|quit退出|!确定
  （3）:q!——不保存直接退出
```
3.3  命令行模式功能键
```
1. 进入插入模式的不同方式
命令行模式时：
· 按i进入：从光标当前位置开始输入文字
· I：在当前行开始处添加文本
· 按a进入：从光标当前位置的下一个位置开始输入文字
· A：在当前行末尾处添加文本
· 按o进入：在当前行下一行插入新一行，从行首开始输入文字
· O：在当前行上一行新建一行
· J：合并光标所在行和下一行为一行
· s：替换字符，同时进入插入模式|r命令仅可替换
【显示行号】
在底行模式下 :set nu <即number>
2. 移动光标
需先按「ESC」进入命令行模式
· h|j|k|l：分别对应左|下|上|右 && 可在字母前加数字，移动相应行数 
· ctrl+b|f|u|d：分别对应向前文移动一页back|向后文移动一页front|向前文移动半页|向后文移动半页
· # +（ctrl+b|f）：向前|后移动#页
· 0|G：移到文章开头|最后
· ^|$：移到光标所在行的行首|行尾
· w|e：光标跳到下个单词的开头|字尾
· b：光标回到上个单词的开头
· #l：光标移到从当前位置（为0）往右的第#个位置
【Linux中以,|.|?|!为一句】
· ( | )：光标移至上一句|下一句开头
【Linux中以一个空白行开始和结束的片段为一段】
· { | }：光标移至前一段|后一段开头
3. 删除文字
· x：删除光标所在位置的字符
· #x：删除从光标所在位置开始到后面的共#个字符，包括自身
· X：大写，删除光标所在位置的前一个字符
· #X：删除光标所在位置前面的#个字符，不包括自身
· D：删除从光标所在处到行尾，包括自身
· dd：删除光标所在行
· #dd：从光标所在行开始删除#行
4. 复制
· p：黏贴
· yw：将光标所在到词尾的字符复制到缓冲区
· #yw：复制#个字到缓冲区|从0开始数
· yy：复制光标所在行到缓冲区
· #yy：复制从光标所在行下数#行文字
5. 替换
· r：替换光标所在处的字符
· R：从光标所在处开始替换到按下「ESC」 # 左下角会显示---REPLACE---
6. u：撤销
7. 更改
· cw：更改光标所在处的字直至该单词尾
· c#w：更改#个字
· cc：从光标所在行修改到该行末尾
8. 跳到指定行
· ctrl + g：列出光标所在行的行号
· #G：移动光标至第#行行首
· L：移至该行行首
· $：移至该行行尾
9. 在当前屏幕移动，而不使整个文件滚动
【H命令】
· H：光标移至屏幕首行行首
· #H：移至当前屏幕第n行行首
· dH：删除光标所在行到屏幕首行全部内容
【M命令】
· M：光标移至屏幕中间行行首
· dM：删除光标所在行到屏幕中间行全部内容
【L命令】
· L：光标移至屏幕最底行行首|若该行有字符，而光标未在行首，则仅移至该行行首
· #L：光标移至从底行起第#行
· dL：删除光标所在行到屏幕底行全部内容
10. 屏幕调整 
· 行号 z 行数<回车>：8z16——以第8行为屏幕首行，共显示16行
· 行号 z 行数. ：15z.——第15行为屏幕中间行，显示整屏
· 行号 z 行数_：15 z 5_——将15行为屏幕最末行，显示5行
若省略行号则当行号为光标所在行，显示为整屏
11. 重复命令「.」
```
3.4  底行模式命令简介
通过`:`进入底行模式
```
1. 查找字符
· :/或? + 关键字：若文中有多个关键字，当第一次搜索出的关键字不是想要寻找的时，可按n跳至另一处
· 命令模式下，直接 / +关键字即可，会在底行显示
2. 保存文件
· :wq!：保存|退出|确认
3. 读入文件
·  :e /etc/pass：在光标所在处读入/ect/pass
4. 插入字符串
· :$s/^/xxxx/_在光标所在行行首插入xxxx
· :%s/^/xxxx_在文件所有行行首插入xxxx
· :%s/$/xxxxx_在文件所有行行尾插入xxxxx
· :%s/string1/string2_将整个文件中的string1替换为string2
· :%s/string1/string2/gc_g表示每行中的string1都被替换，若无g，则仅换第一个；c表替换前询问
# y表示替换当前光标|n表不替换当前光标|a表全部替换|q表退出不再替换|l表替换且光标移至该行行首|^E=ctrl+e，表令此时屏幕上滚，即下面多显示一行|^Y=ctrl+y
· :%s/string_删除文中所有string字
· :3,5s/string1/string2/_仅代替3-5行的string1
```

#### 4. find命令
```
1. 按文件名搜索
# 必须和搜索关键字一模一样才列出，包含的并不列出
· find /搜索路径/-name 文件名
· find /搜索路径/-iname 文件名：不区分文件名大小写
· find /搜索路径/-inum 文件名：按inode号搜索| find.-inum
2. 按文件大小搜索
· find.-size 25k|-25k|+25k：寻找25k|小于25|大于25k的文件
<千兆用大写G，兆字节用大小M，千字节用小写k，字节为小写c，若不输入单位默认为512byte>
3. 按修改时间搜索
<time指天数，min指分钟>
· -atime 时间|+时间|-时间：时间5-6天前|长于时间<6及以上天前>|时间以内的文件访问时间
· -mtime：按数据修改时间
· -ctime：按文件状态修改时间
4. 按文件类型
· -type d：查找目录
<find /etc -type d>
· -type f：查找普通文件
· -type l：查找软连接文件
5. 逻辑运算符
· -a：逻辑与
<find.-size +2k -a -type f——文件大小大于2k且类型为普通文件>
· -o：逻辑或
· -not：逻辑非
<find.-not -name cangls——文件名非cangls的文件>
```

#### 5. cp命令
`cp(options)(parameter)`
```
cp 文件名 /home/bd61
[options]
1. -a：复制目录，保留链接、文件属性并复制目录下所有内容
2. -d：复制时保留链接<类Windows的快捷方式>
3. -f：覆盖已存在的目标文件而不提示
4. -i：覆盖文件前给出提示，回‘y’时文件被覆盖
5. -p：复制文件内容且复制其修改时间和访问权限
6. -r：复制该目录下的所有子目录和文件
<cp -r test/ newtest：将当前test/下的所有文件复制到新目录newtwst下>
```

#### 6. move命令
```
· mv 文件名 文件名：将源文件名改为目标文件名
· mv 文件名 目录名：将文件移动到目标目录
· mv 目录名 目录名：若有目标目录存在则移动；无则改名
< mv info/ logs：将info目录放入logs目录中>

[options]
· -f：覆盖已存在的目标文件而不提示
· -i：覆盖文件前给出提示，回‘y’时文件被覆盖
```

#### 7. rm命令
用于删除文件或目录，不可恢复
```
[options]
· -i 删除前逐一询问确认| 不可用于删除目录
<rm -i test>
· -f 即使原档案属性设为唯读，亦直接删除，无需逐一确认
· -r 将目录及以下之档案亦逐一删除
```

#### 8. wc命令
用于计算文件大小、字数或列数
```
· wc 文件名：返回行数|单词数|字节数
<wc bts.txt-》5 3 65 bts.txt——5行、3个单词、65个字节
· wc 文件名1 文件名2：可同时统计多个文件名—
<wc bts.txt test——返回三行，各自统计一行及total

[options]
· wc -c xxx：只显示字节数chars
· wc -l xxx：只显示行数line
· wc -w xxx：只显示单词数|字数word
· wc --help：在线帮助
· wc --version：显示版本信息
```

#### 9. cat命令|head/tail命令
* cat：用于连接文件并打印到标准输出设备上
```
将file1和file2合并后输出file中，覆盖旧文件| 若要保留旧文件，则用>>
cat file1 file2 > file
```
* head|tail：用于显示文件开头|结尾的内容，默认显示头十行|尾十行的内容
```
head[options][file]
· head -# 文件名：显示文件前#行
· head -n -# 文件名：显示除去最后#行的内容

tail[options][file]
· tail -# 文件名：显示最后#行的内容
· tail -n +# 文件名：显示除了前#-1行的内容

· 第十行数据
<cat 文件名 | head -10 | tail -1 > /home/bd61 >
# head获取前十行，再获取前十行的最后一行
# 将数据导入/home/bd61才可以读写
```

#### 10. rz/sz命令
上传和下载命令，实现linux和windows的文件共享
```
· sz：下载，将选定文件发送得到本地机器|send
· rz：上传，运行该命令会弹出一个文件选择窗口，从本地选择文件上传到服务器|receive
```

#### 11. chmod命令
` chmod [-cfvR] [--help] [--version] mode file….`
```
mode_权限设定字串，格式：
[ugoa] [ +|-|=  r|w|x|X]

1.对象
·u：文件拥有者user
·g：与文件拥有者属于同一群体group
·o：以上两者以外other
·a：表示以上三者
2.权限
·+：增加权限
·-：取消权限
·=：设定唯一权限
3.功能
·r：可读取
·w：可写入
·x：可执行
·X：只有当该文件是个子目录或者该文件已经被设定过为可执行
4.用数字表示权限，格式：
chmod abc file
·a|b|c：分别为user|group|other
·r=4，w=2, x=1______rwx:7|rw-:6| r-x:5| r--:4
5.Examples
·chmod ugo+r file1.txt              # 所有人皆可读file1.txt
·chmod a+r file1.txt file2.txt       # 所有人皆可读file1.txt和file2.txt
·chmod u+x ex1.py                     # 仅文件拥有者可执行
·chmod 777 file1.txt                     # 指a|b|c分别有权限7|7|7，a|b|c对应u|g|o
```
#### 12. ps命令
* Process Status：用于列出系统当前运行的进程的快照|即执行ps命令的时刻
> 若想动态监测进程，则使用top命令
```
ps aux；显示所有包含其他使用者的行程
其中 STAT 若为 R 则表示正在运行
```
#### 13. grep命令(管道命令)
* 应用于查找文件里符合条件的字符串，若发现文件内容符合所指定的范本样式，grep会将含有范本样式的那一列显示出来
```
# 将左边文件的标准输出作为右边文件的标准输入
cat 左边文件 | 右边文件
```
#### 三、Exercise
```
1. 请在 /tmp 这个目录下建立一个名为 vitest 的目录；
mkdir /home/bd61/vitest

2. 进入 vitest 这个目录当中；
cd /home/bd61/vitest

3. 将 /etc/man.config 拷贝到本目录底下
cp /etc/man.config ./或/home/bd61/vitest
# man.config为etc目录下man.config文件|./表示当前目录

4. 使用 vi 开启本目录下的 man.config 这个档案； 
vi /tmp/vitest/etc/man.config
x ans: vi man.config
# 根据当时的目录而定

5. 在 vi 中设定一下行号； 
:set nu

6. 移动到第 58 行，向右移动 40 个字符，请问您看到的双引号内是什么目录？ 
58G 40l /dir/bin/foo

7. 移动到第一行，并且向下搜寻一下“bzip2”这个字符串，请问他在第几行？ 
1G /bzip2 137

8. 接着下来，我要将 50 到 100 行之间的 man 改为 MAN，并且一个一个挑选是否需要修改，如何下达指令？ 
:50,100s/man/MAN/gc

9. 修改完之后，突然反悔了，要全部复原，有哪些方法？ 
1）u
2）:q! 不存储离开

10. 我要复制 51 到 60 行这十行的内容，并且贴到最后一行之后； 
x ans: 51G 10yy G p

11. 删除 11 到 30 行之间的 20 行；
11G 20dd

12. 将这个文件另存成一个 man.test.config 的文件； 
x ans_:w man.test.config

13. 到第 29 行，并且删除 15 个字符； 
29G 15x

14. 储存后离开
:wq!
```
